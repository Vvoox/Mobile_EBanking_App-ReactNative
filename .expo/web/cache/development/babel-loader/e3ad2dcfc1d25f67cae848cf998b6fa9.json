{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Mention = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _mention = require(\"./mention.style\");\n\nvar _theme = require(\"../../theme\");\n\nvar _withDefaultProps = require(\"../../utilities/withDefaultProps\");\n\nvar _jsxFileName = \"/Users/pawankumar/Sites/react-native-magnus/src/ui/mention/mention.component.tsx\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar MentionBase = function (_React$Component) {\n  (0, _inherits2.default)(MentionBase, _React$Component);\n\n  var _super = _createSuper(MentionBase);\n\n  function MentionBase() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, MentionBase);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"previousChar\", ' ');\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"isTrackingStarted\", false);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"state\", {\n      textInputHeight: '',\n      isTrackingStarted: false\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"startTracking\", function () {\n      _this.isTrackingStarted = true;\n\n      _this.setState({\n        isTrackingStarted: true\n      });\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"stopTracking\", function () {\n      var onHide = _this.props.onHide;\n      _this.isTrackingStarted = false;\n\n      _this.setState({\n        isTrackingStarted: false\n      });\n\n      if (onHide) {\n        onHide();\n      }\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"updateSuggestions\", function (lastKeyword) {\n      var triggerCallback = _this.props.triggerCallback;\n      triggerCallback(lastKeyword);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"identifyKeyword\", function (val) {\n      var _this$props = _this.props,\n          trigger = _this$props.trigger,\n          triggerLocation = _this$props.triggerLocation;\n\n      if (_this.isTrackingStarted) {\n        var boundary = triggerLocation === 'new-word-only' ? 'B' : '';\n        var pattern = new RegExp(\"\\\\\".concat(boundary).concat(trigger, \"[a-z0-9_-]+|\\\\\").concat(boundary).concat(trigger), 'gi');\n        var keywordArray = val.match(pattern);\n\n        if (keywordArray && !!keywordArray.length) {\n          var lastKeyword = keywordArray[keywordArray.length - 1];\n\n          _this.updateSuggestions(lastKeyword);\n        }\n      }\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"onChangeText\", function (val) {\n      var isTrackingStarted = _this.state.isTrackingStarted;\n      var _this$props2 = _this.props,\n          children = _this$props2.children,\n          triggerLocation = _this$props2.triggerLocation,\n          trigger = _this$props2.trigger;\n\n      if (children.props.onChangeText) {\n        children.props.onChangeText(val);\n      }\n\n      var lastChar = val.substr(val.length - 1);\n      var wordBoundry = triggerLocation === 'new-word-only' ? _this.previousChar.trim().length === 0 : true;\n\n      if (lastChar === trigger && wordBoundry) {\n        _this.startTracking();\n      } else if (lastChar === ' ' && isTrackingStarted || val === '') {\n        _this.stopTracking();\n      }\n\n      _this.previousChar = lastChar;\n\n      _this.identifyKeyword(val);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"resetTextbox\", function () {\n      _this.previousChar = ' ';\n\n      _this.stopTracking();\n    });\n    return _this;\n  }\n\n  (0, _createClass2.default)(MentionBase, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var isTrackingStarted = this.state.isTrackingStarted;\n      var _this$props3 = this.props,\n          m = _this$props3.m,\n          mt = _this$props3.mt,\n          mr = _this$props3.mr,\n          mb = _this$props3.mb,\n          ml = _this$props3.ml,\n          p = _this$props3.p,\n          pr = _this$props3.pr,\n          pt = _this$props3.pt,\n          pb = _this$props3.pb,\n          pl = _this$props3.pl,\n          borderColor = _this$props3.borderColor,\n          borderBottomColor = _this$props3.borderBottomColor,\n          borderLeftColor = _this$props3.borderLeftColor,\n          borderTopColor = _this$props3.borderTopColor,\n          borderRightColor = _this$props3.borderRightColor,\n          borderWidth = _this$props3.borderWidth,\n          borderLeftWidth = _this$props3.borderLeftWidth,\n          borderRightWidth = _this$props3.borderRightWidth,\n          borderBottomWidth = _this$props3.borderBottomWidth,\n          borderTopWidth = _this$props3.borderTopWidth,\n          rounded = _this$props3.rounded,\n          roundedTop = _this$props3.roundedTop,\n          roundedRight = _this$props3.roundedRight,\n          roundedBottom = _this$props3.roundedBottom,\n          roundedLeft = _this$props3.roundedLeft,\n          children = _this$props3.children,\n          _renderItem = _this$props3.renderItem,\n          loading = _this$props3.loading,\n          data = _this$props3.data,\n          rest = (0, _objectWithoutProperties2.default)(_this$props3, [\"m\", \"mt\", \"mr\", \"mb\", \"ml\", \"p\", \"pr\", \"pt\", \"pb\", \"pl\", \"borderColor\", \"borderBottomColor\", \"borderLeftColor\", \"borderTopColor\", \"borderRightColor\", \"borderWidth\", \"borderLeftWidth\", \"borderRightWidth\", \"borderBottomWidth\", \"borderTopWidth\", \"rounded\", \"roundedTop\", \"roundedRight\", \"roundedBottom\", \"roundedLeft\", \"children\", \"renderItem\", \"loading\", \"data\"]);\n      return React.createElement(_theme.ThemeContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 7\n        }\n      }, function (_ref) {\n        var theme = _ref.theme;\n        var computedStyle = (0, _mention.getStyle)(theme, _this2.props);\n        return React.createElement(_reactNative.View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }\n        }, React.createElement(React.Fragment, null, (data !== null && data !== void 0 ? data : []).length > 0 && isTrackingStarted && loading === false && React.createElement(_reactNative.FlatList, (0, _extends2.default)({\n          data: data,\n          showsVerticalScrollIndicator: true,\n          style: computedStyle.list\n        }, rest, {\n          renderItem: function renderItem(rowData) {\n            return _renderItem(rowData);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 21\n          }\n        })), loading && React.createElement(_reactNative.View, {\n          style: computedStyle.loading,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 19\n          }\n        }, React.createElement(_reactNative.ActivityIndicator, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 21\n          }\n        }))), React.createElement(_reactNative.View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }\n        }, React.cloneElement(children, {\n          onChangeText: _this2.onChangeText\n        })));\n      });\n    }\n  }]);\n  return MentionBase;\n}(React.Component);\n\nvar Mention = (0, _withDefaultProps.withDefaultProps)(MentionBase, 'Mention', {\n  bg: 'white',\n  rounded: 'md',\n  borderColor: 'gray200',\n  borderWidth: 1,\n  horizontal: false,\n  loading: false,\n  shadow: 1,\n  shadowColor: 'gray900',\n  keyboardShouldPersistTaps: 'always',\n  trigger: '@',\n  position: 'absolute',\n  bottom: 0,\n  onHide: function onHide() {}\n});\nexports.Mention = Mention;","map":{"version":3,"sources":["mention.component.tsx"],"names":["MentionBase","React","Component","textInputHeight","isTrackingStarted","onHide","triggerCallback","trigger","triggerLocation","boundary","pattern","keywordArray","val","lastKeyword","children","lastChar","wordBoundry","m","mt","mr","mb","ml","p","pr","pt","pb","pl","borderColor","borderBottomColor","borderLeftColor","borderTopColor","borderRightColor","borderWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","borderTopWidth","rounded","roundedTop","roundedRight","roundedBottom","roundedLeft","renderItem","loading","data","rest","theme","computedStyle","flex","onChangeText","Mention","bg","horizontal","shadow","shadowColor","keyboardShouldPersistTaps","position","bottom"],"mappings":"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","sourcesContent":["import * as React from 'react';\n\nimport { View, FlatList, ActivityIndicator } from 'react-native';\n\nimport { MentionProps } from './mention.type';\nimport { getStyle } from './mention.style';\nimport { ThemeContext } from '../../theme';\nimport { withDefaultProps } from '../../utilities/withDefaultProps';\nimport { DefaultProps } from '../../types';\n\nclass MentionBase extends React.Component<\n  MentionProps & DefaultProps<MentionProps>\n> {\n  previousChar = ' ';\n\n  isTrackingStarted = false;\n\n  state = {\n    textInputHeight: '',\n    isTrackingStarted: false,\n  };\n\n  startTracking = () => {\n    this.isTrackingStarted = true;\n    this.setState({\n      isTrackingStarted: true,\n    });\n  };\n\n  stopTracking = () => {\n    const { onHide } = this.props;\n\n    this.isTrackingStarted = false;\n    this.setState({\n      isTrackingStarted: false,\n    });\n\n    if (onHide) {\n      onHide();\n    }\n  };\n\n  updateSuggestions = (lastKeyword: string) => {\n    const { triggerCallback } = this.props;\n\n    triggerCallback(lastKeyword);\n  };\n\n  identifyKeyword = (val: string) => {\n    const { trigger, triggerLocation } = this.props;\n\n    if (this.isTrackingStarted) {\n      const boundary = triggerLocation === 'new-word-only' ? 'B' : '';\n      const pattern = new RegExp(\n        `\\\\${boundary}${trigger}[a-z0-9_-]+|\\\\${boundary}${trigger}`,\n        'gi'\n      );\n      const keywordArray = val.match(pattern);\n      if (keywordArray && !!keywordArray.length) {\n        const lastKeyword = keywordArray[keywordArray.length - 1];\n\n        this.updateSuggestions(lastKeyword);\n      }\n    }\n  };\n\n  /**\n   * on change text\n   */\n  onChangeText = (val: string) => {\n    const { isTrackingStarted } = this.state;\n    const { children, triggerLocation, trigger } = this.props;\n\n    if (children.props.onChangeText) {\n      children.props.onChangeText(val);\n    }\n\n    const lastChar = val.substr(val.length - 1);\n    const wordBoundry =\n      triggerLocation === 'new-word-only'\n        ? this.previousChar.trim().length === 0\n        : true;\n    if (lastChar === trigger && wordBoundry) {\n      this.startTracking();\n    } else if ((lastChar === ' ' && isTrackingStarted) || val === '') {\n      this.stopTracking();\n    }\n    this.previousChar = lastChar;\n    this.identifyKeyword(val);\n  };\n\n  resetTextbox = () => {\n    this.previousChar = ' ';\n    this.stopTracking();\n  };\n\n  render() {\n    const { isTrackingStarted } = this.state;\n\n    const {\n      m,\n      mt,\n      mr,\n      mb,\n      ml,\n      p,\n      pr,\n      pt,\n      pb,\n      pl,\n      borderColor,\n      borderBottomColor,\n      borderLeftColor,\n      borderTopColor,\n      borderRightColor,\n      borderWidth,\n      borderLeftWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderTopWidth,\n      rounded,\n      roundedTop,\n      roundedRight,\n      roundedBottom,\n      roundedLeft,\n      children,\n      renderItem,\n      loading,\n      data,\n      ...rest\n    } = this.props;\n\n    return (\n      <ThemeContext.Consumer>\n        {({ theme }) => {\n          const computedStyle = getStyle(theme, this.props);\n\n          return (\n            <View style={{ flex: 1 }}>\n              <>\n                {(data ?? []).length > 0 &&\n                  isTrackingStarted &&\n                  loading === false && (\n                    <FlatList\n                      data={data}\n                      showsVerticalScrollIndicator\n                      style={computedStyle.list}\n                      {...rest}\n                      renderItem={(rowData) => {\n                        return renderItem(rowData);\n                      }}\n                    />\n                  )}\n                {loading && (\n                  <View style={computedStyle.loading}>\n                    <ActivityIndicator />\n                  </View>\n                )}\n              </>\n\n              <View>\n                {React.cloneElement(children, {\n                  onChangeText: this.onChangeText,\n                })}\n              </View>\n            </View>\n          );\n        }}\n      </ThemeContext.Consumer>\n    );\n  }\n}\n\nconst Mention = withDefaultProps(MentionBase, 'Mention', {\n  bg: 'white',\n  rounded: 'md',\n  borderColor: 'gray200',\n  borderWidth: 1,\n  horizontal: false,\n  loading: false,\n  shadow: 1,\n  shadowColor: 'gray900',\n  keyboardShouldPersistTaps: 'always',\n  trigger: '@',\n  position: 'absolute',\n  bottom: 0,\n  onHide: () => {},\n});\n\nexport { Mention };\n"]},"metadata":{},"sourceType":"script"}