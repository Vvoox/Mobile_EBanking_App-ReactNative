{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Carousel = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _useDefaultProps = require(\"../../utilities/useDefaultProps\");\n\nvar _div = require(\"../div/div.component\");\n\nvar _scrolldiv = require(\"../scrolldiv/scrolldiv.component\");\n\nvar _item = _interopRequireDefault(require(\"./item.carousel\"));\n\nvar _jsxFileName = \"/Users/pawankumar/Sites/react-native-magnus/src/ui/carousel/carousel.component.tsx\";\n\nvar Carousel = function Carousel(incomingProps) {\n  var props = (0, _useDefaultProps.useDefaultProps)('Carousel', incomingProps, {\n    showIndicators: true\n  });\n  var children = props.children,\n      renderIndicators = props.renderIndicators,\n      showIndicators = props.showIndicators;\n\n  var _React$useState = _react.default.useState(1),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      selectedPage = _React$useState2[0],\n      setSelectedPage = _React$useState2[1];\n\n  var _React$useState3 = _react.default.useState(1),\n      _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n      totalPages = _React$useState4[0],\n      setTotalPages = _React$useState4[1];\n\n  var _React$useState5 = _react.default.useState(0),\n      _React$useState6 = (0, _slicedToArray2.default)(_React$useState5, 2),\n      totalContentWidth = _React$useState6[0],\n      setTotalContentWidth = _React$useState6[1];\n\n  var items = _react.default.useMemo(function () {\n    var _React$Children$map;\n\n    return (_React$Children$map = _react.default.Children.map(children, function (child) {\n      if (!_react.default.isValidElement(child)) {\n        return;\n      }\n\n      if (child.type === _item.default) {\n        return child;\n      }\n\n      console.warn('Only children of type Carousel.Item are allowed here. Any other child components will be ignored.');\n      return null;\n    })) !== null && _React$Children$map !== void 0 ? _React$Children$map : [];\n  }, [children]);\n\n  var init = function init(width) {\n    setTotalContentWidth(width);\n    var totalItems = items.length;\n    setTotalPages(totalItems);\n  };\n\n  var getPage = function getPage(event) {\n    var widthOffset = event.nativeEvent.contentOffset.x;\n    var widthOfEachItem = totalContentWidth / totalPages;\n\n    for (var page = 1; page <= totalPages; page++) {\n      if (widthOffset + 1 < widthOfEachItem * page) {\n        return page;\n      }\n\n      if (page === totalPages) {\n        return page;\n      }\n    }\n\n    return 0;\n  };\n\n  var internal_renderIndicators = function internal_renderIndicators() {\n    if (renderIndicators) {\n      return renderIndicators({\n        selectedPage: selectedPage,\n        totalPages: totalPages\n      });\n    }\n\n    return _react.default.createElement(_div.Div, {\n      flexDir: \"row\",\n      justifyContent: \"center\",\n      my: \"lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, Array(totalPages).fill(0).map(function (_, index) {\n      return _react.default.createElement(_div.Div, {\n        w: 10,\n        h: 10,\n        rounded: \"circle\",\n        bg: selectedPage === index + 1 ? 'blue600' : 'gray400',\n        mx: \"xs\",\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }\n      });\n    }));\n  };\n\n  return _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_scrolldiv.ScrollDiv, (0, _extends2.default)({}, props, {\n    horizontal: true,\n    contentContainerStyle: {\n      width: \"\".concat(100 * totalPages, \"%\"),\n      flex: 1\n    },\n    showsHorizontalScrollIndicator: false,\n    onContentSizeChange: function onContentSizeChange(w, _h) {\n      return init(w);\n    },\n    onScroll: function onScroll(data) {\n      setTotalContentWidth(data.nativeEvent.contentSize.width);\n      setSelectedPage(getPage(data));\n    },\n    scrollEventThrottle: 200,\n    pagingEnabled: true,\n    decelerationRate: \"fast\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }), items === null || items === void 0 ? void 0 : items.map(function (child, index) {\n    return _react.default.createElement(_div.Div, {\n      flex: 1,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, child);\n  })), showIndicators && internal_renderIndicators());\n};\n\nexports.Carousel = Carousel;\nCarousel.Item = _item.default;","map":{"version":3,"sources":["carousel.component.tsx"],"names":["Carousel","props","showIndicators","children","renderIndicators","selectedPage","setSelectedPage","React","totalPages","setTotalPages","totalContentWidth","setTotalContentWidth","items","child","CarouselItem","console","init","totalItems","getPage","widthOffset","event","widthOfEachItem","page","internal_renderIndicators","Array","index","width","flex","data"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { NativeScrollEvent, NativeSyntheticEvent } from 'react-native';\nimport { useDefaultProps } from '../../utilities/useDefaultProps';\nimport { Div } from '../div/div.component';\nimport { ScrollDiv } from '../scrolldiv/scrolldiv.component';\n\nimport { CarouselProps, CompoundedCarousel } from './carousel.type';\nimport CarouselItem from './item.carousel';\n\nconst Carousel: CompoundedCarousel<CarouselProps> = (incomingProps) => {\n  const props = useDefaultProps('Carousel', incomingProps, {\n    showIndicators: true,\n  });\n\n  const { children, renderIndicators, showIndicators } = props;\n  const [selectedPage, setSelectedPage] = React.useState(1);\n  const [totalPages, setTotalPages] = React.useState(1);\n  const [totalContentWidth, setTotalContentWidth] = React.useState(0);\n\n  const items: JSX.Element[] = React.useMemo(() => {\n    return (\n      React.Children.map(children, (child) => {\n        if (!React.isValidElement(child)) {\n          return;\n        }\n\n        if (child.type === CarouselItem) {\n          return child;\n        }\n\n        console.warn(\n          'Only children of type Carousel.Item are allowed here. Any other child components will be ignored.'\n        );\n        return null;\n      }) ?? []\n    );\n  }, [children]);\n\n  const init = (width: number) => {\n    // initialize width\n    setTotalContentWidth(width);\n    // initialize total pages\n    const totalItems = items.length;\n    setTotalPages(totalItems);\n  };\n\n  const getPage = (event: NativeSyntheticEvent<NativeScrollEvent>) => {\n    const widthOffset = event.nativeEvent.contentOffset.x;\n\n    const widthOfEachItem = totalContentWidth / totalPages;\n    // const pageWidth = widthOfEachItem * itemsPerPage;\n\n    for (let page = 1; page <= totalPages; page++) {\n      if (widthOffset + 1 < widthOfEachItem * page) {\n        return page;\n      }\n\n      if (page === totalPages) {\n        return page;\n      }\n    }\n\n    return 0;\n  };\n\n  const internal_renderIndicators = () => {\n    if (renderIndicators) {\n      return renderIndicators({ selectedPage, totalPages });\n    }\n\n    return (\n      <Div flexDir=\"row\" justifyContent=\"center\" my=\"lg\">\n        {Array(totalPages)\n          .fill(0)\n          .map((_, index) => {\n            return (\n              <Div\n                w={10}\n                h={10}\n                rounded=\"circle\"\n                bg={selectedPage === index + 1 ? 'blue600' : 'gray400'}\n                mx=\"xs\"\n                key={index}\n              />\n            );\n          })}\n      </Div>\n    );\n  };\n\n  return (\n    <>\n      <ScrollDiv\n        {...props}\n        horizontal={true}\n        contentContainerStyle={{\n          width: `${100 * totalPages}%`,\n          flex: 1,\n        }}\n        showsHorizontalScrollIndicator={false}\n        onContentSizeChange={(w, _h) => init(w)}\n        onScroll={(data) => {\n          setTotalContentWidth(data.nativeEvent.contentSize.width);\n          setSelectedPage(getPage(data));\n        }}\n        scrollEventThrottle={200}\n        pagingEnabled\n        decelerationRate=\"fast\"\n      >\n        {items?.map((child, index) => (\n          <Div flex={1} key={index}>\n            {child}\n          </Div>\n        ))}\n      </ScrollDiv>\n\n      {showIndicators && internal_renderIndicators()}\n    </>\n  );\n};\n\nCarousel.Item = CarouselItem;\n\nexport { Carousel };\n"]},"metadata":{},"sourceType":"script"}